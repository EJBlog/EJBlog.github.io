<!DOCTYPE html>
<html class="no-js">

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Map</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">


	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/map.css">
	<link rel="stylesheet" href="css/editor.css">
	<!-- CSS for editor -->
	<link rel="stylesheet" href="css/ui-lightness-jquery-ui-1.8.7.custom.css">
	<!-- CSS for editor -->


</head>

<body>

	<h1>Map 3</h1>
	<!-- <svg xmlns="http://www.w3.org/2000/svg" width="959" height="593"> -->

	<style>
		.svg-clipped {
			-webkit-clip-path: url(#outlines);
			clip-path: url(#outlines);
		}

	</style>

	<img src="img/ota_badge.jpg" class="svg-clipped"></img>
	<!-- <div id="ky" class="svg-clipped"></div> -->
	<svg>
	<defs>
	<clipPath id="outlines">
	<circle stroke="#000000" stroke-miterlimit="10" cx="193.949" cy="235" r="97.1801">
	</circle>
	</clipPath>
	</defs>
	</svg>


	<!-- <path fill="#FFFFFF" stroke="#000000" d=statePath> 	</path> -->
	<!-- Hoping the path we pull from the SVG image for the selected state could be used in the clippath -->



	<div id="imageEditor">
		<section id="editorContainer">
			<!-- <canvas id="editor" class="svg-clipped" width="480" height="480" style="border:1px solid #000000"> -->
			<canvas id="editor" width="480" height="480" style="border:1px solid #000000">
			</canvas>
		</section>
	</div>

		<button onclick="pathTest()"> Path Test </button>
		<p id="pathTest"> Path Test </p>
		<p id="pathTest2"> Path Test2 </p>


		<script src="jquery/jquery-1.12.4.min.js"></script>
		<script src="jquery/jquery-ui-1.10.3.js"></script>
		<script src="js/raphael.js"></script>
		<script src="js/ky_state_svg.js"></script>
		<script src="js/Fabric_JS/fabric.min.js"></script>>

		<script>
			var canvas = new fabric.Canvas('editor', {
				backgroundColor: 'white',
				width: $("#editor").width(),
	      height: $("#editor").height()
			});


			var statePath;
			var loadedObjects;
			var group = [];
			fabric.loadSVGFromURL("svg/ky.svg", function(objects, options) {
					loadedObjects = new fabric.Group(group);
					loadedObjects.set({
						left: 0,
						top: 0,
						width: canvas.width,
						height: canvas.height
					});

					canvas.add(loadedObjects._objects[16]);

					fabric.Image.fromURL('img/ota_badge1.png', function(img) {
						 img.set({
							 left: 0,
							 top: 0,
							 clipTo: function (ctx) {
								//  logo.render(ctx);
								// ctx.arc(0, 0, 300, 0, Math.PI * 2, true);
								// <circle stroke="#000000" stroke-miterlimit="10" cx="193.949" cy="235" r="97.1801">
								// </circle>
								// ctx.circle("#000000","10","193.949", "235", "97.1801" );
								circle.render(ctx);
							},
						 });
						 canvas.add(img);

						});

					canvas.renderAll();
					statePath = String(loadedObjects._objects[15].path);
					//document.querySelector(".svg-clipped2").style.clip-path = "url(#statePath)"; // Maybe try to change the css to use the path? idk
				},
				function(item, object) {
					object.set('id', item.getAttribute('id'));
					group.push(object);
				});


			function pathTest() {
				document.getElementById("pathTest").innerHTML = loadedObjects._objects[16].path; //This worked and produced M,607.2,331.8,l,12.6,-0.7,l,0.1,-4.1,h,4.3,l,30.4,-3.2,l,45.1,-4.3,l,5.6,-3.6,l,3.9,-2.1,l,0.1,-1.9,l,6,-7.8,l,4.1,-3.6,l,2.1,-2.4,l,-3.3,-2,l,-2.5,-2.7,l,-3,-3.8,l,-0.5,-2.2,l,-2.6,-1.4,l,-0.9,-1.9,l,-0.2,-6.1,l,-2.6,-2,l,-1.9,-1.1,l,-0.5,-2.3,l,-1.3,0.2,l,-2,1.2,l,-2.5,2.7,l,-1.9,-1.7,l,-2.5,-0.5,l,-2.4,1.4,h,-2.3,l,-1.8,-2,l,-5.6,-0.1,l,-1.8,-4.5,l,-2.9,-1.5,l,-2.1,0.8,l,-4.2,0.2,l,-0.5,2.1,l,1.2,1.5,l,0.3,2.1,l,-2.8,2,l,-3.8,1.8,l,-2.6,0.4,l,-0.5,4.5,l,-4.9,3.6,l,-2.6,3.7,l,0.2,2.2,l,-0.9,2.3,l,-4.5,-0.1,l,-1.3,-1.3,l,-3.9,2.2,l,0.2,3.3,l,-2.4,0.6,l,-0.8,-1.4,l,-1.7,-1.2,l,-2.7,1.1,l,-1.8,3.5,l,-2.2,-1,l,-1.4,-1.6,l,-3.7,0.4,l,-5.6,1,l,-2.8,1.3,l,-1.2,3.4,l,-1,1,l,1.5,3.7,l,-4.2,1.4,l,-1.9,1.4,l,-0.4,2.2,l,1.2,2.4,v,2.2,l,-1.6,0.4,l,-6.1,-2.5,l,-2.3,0.9,l,-2,1.4,l,-0.8,1.8,l,1.7,2.4,l,-0.9,1.8,l,-0.1,3.3,l,-2.4,1.3,l,-2.1,1.7,z l,-2.6,-1.4

				document.getElementById("pathTest2").innerHTML = statePath;

			};


			// var stateOutline = new fabric.Path(statePath);
			// stateOutline.set(); // Set width, height and other properties here



		</script>


</body>

</html>
